import{_ as l,a as d,s as c,b as h,i as _,f as u,g as f,c as v,o as p,e as m,r as g,h as y,l as $}from"./index-907541df.js";const w={data(){return{timeline:[],land110:{},map_num:0,mapinfo_list:[]}},async mounted(){const n=this;try{let t=await d.get("/data/adventureEvent.json");n.timeline=t.data,t=await d.get("/data/land-110m.json"),n.land110=t.data;let e=document.getElementById("timeline");e.innerHTML=this.createTimeLine(),await new Promise(i=>setTimeout(i,0)),this.addLine(),this.createChartMap()}catch(t){console.log(t)}},methods:{createTimeLine(){let t=['<h1 class="article-name">南极探秘时间轴</h1><div class="timeline"><div class="entries">'],e="";const i=this.timeline;let s=0;return i.forEach(a=>{if(isNaN(a.date))r="big";else{var o=a.date[0]+""+a.date[1],r="";e!==o&&(e=o,r=" big")}t.push(`
                    <div class="entry">
                        <div class="title ${r}">${a.date}</div>
                        <div class="body">${a.sentence}</div>
                    `),a.mapinfo!==void 0&&(s=s+1,this.mapinfo_list.push(a.mapinfo),t.push(`
                        <div id="chart-map-${s}" class="chart-map"></div>
                    `)),t.push("</div>")}),this.map_num=s,t.push("</div></div>"),`${t.join("")}`},addLine(){const n=c(".timeline"),t=n.node().getBoundingClientRect().height;n.append("svg").attr("class","line").attr("id","mline").attr("width",4).attr("height",t).append("line").attr("x1",4).attr("x2",4).attr("y1",20).attr("y2",t-20).attr("stroke","#6c307d").attr("stroke-width",1)},createChartMap(){const n=this.map_num,t=this.mapinfo_list;for(let e=0;e<n;e++){let i=document.getElementById("chart-map-"+(e+1));const s=i.offsetWidth,a=i.offsetHeight;i.innerHTML="",this.drawBaseMap("#chart-map-"+(e+1),s,a,t[e])}},drawBaseMap(n,t,e,i){let s=c(n).append("svg").attr("width",t).attr("height",e);const a=h().rotate([0,90,0]).scale(t*1.2).translate([t*.5,e*.5]),o=_().projection(a);s.append("path").datum(u(this.land110,this.land110.objects.land)).attr("d",o).style("fill","#f3e1b9"),s.append("path").datum(f()).attr("d",o).style("fill","none").style("stroke","#fff").style("stroke-width",.4).style("stroke-opacity",.6);const r=v().center(i.center).radius(i.r)();s.append("path").datum(r).attr("d",o).attr("fill","none").attr("stroke","red").attr("stroke-width","1px")}}},L={id:"timeline"};function T(n,t,e,i,s,a){return p(),m("div",L)}const x=l(w,[["render",T]]);const k={name:"ChapterOne",components:{timeLineVue:x},data(){return{}},mounted(){},created(){window.scrollTo(0,0)},methods:{}},b={class:"container"};function B(n,t,e,i,s,a){const o=g("timeLineVue");return p(),m("div",b,[y("div",null,[$(o)])])}const j=l(k,[["render",B],["__scopeId","data-v-141bcc65"]]);export{j as default};
