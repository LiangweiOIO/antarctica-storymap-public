import{D as Ht,E as K,F as ft,G as ht,H as Xt,t as Gt,d as Wt,_ as jt,a as Q,z as dt,s as L,b as Qt,i as Ut,g as Zt,f as Jt,o as Et,e as It,h as Y,r as Kt,l as tn}from"./index-c452a21b.js";import{s as C,g as nn}from"./geoScaleBar-a4ef8a73.js";function H(t,n){return t==null||n==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function rn(t,n){return t==null||n==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function Bt(t){let n,r,e;t.length!==2?(n=H,r=(u,c)=>H(t(u),c),e=(u,c)=>t(u)-c):(n=t===H||t===rn?t:en,r=t,e=t);function i(u,c,o=0,f=u.length){if(o<f){if(n(c,c)!==0)return f;do{const l=o+f>>>1;r(u[l],c)<0?o=l+1:f=l}while(o<f)}return o}function a(u,c,o=0,f=u.length){if(o<f){if(n(c,c)!==0)return f;do{const l=o+f>>>1;r(u[l],c)<=0?o=l+1:f=l}while(o<f)}return o}function s(u,c,o=0,f=u.length){const l=i(u,c,o,f-1);return l>o&&e(u[l-1],c)>-e(u[l],c)?l-1:l}return{left:i,center:s,right:a}}function en(){return 0}function an(t){return t===null?NaN:+t}const on=Bt(H),sn=on.right;Bt(an).center;const un=sn;function U(t,n){let r,e;if(n===void 0)for(const i of t)i!=null&&(r===void 0?i>=i&&(r=e=i):(r>i&&(r=i),e<i&&(e=i)));else{let i=-1;for(let a of t)(a=n(a,++i,t))!=null&&(r===void 0?a>=a&&(r=e=a):(r>a&&(r=a),e<a&&(e=a)))}return[r,e]}class gt extends Map{constructor(n,r=fn){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),n!=null)for(const[e,i]of n)this.set(e,i)}get(n){return super.get(pt(this,n))}has(n){return super.has(pt(this,n))}set(n,r){return super.set(cn(this,n),r)}delete(n){return super.delete(ln(this,n))}}function pt({_intern:t,_key:n},r){const e=n(r);return t.has(e)?t.get(e):r}function cn({_intern:t,_key:n},r){const e=n(r);return t.has(e)?t.get(e):(t.set(e,r),r)}function ln({_intern:t,_key:n},r){const e=n(r);return t.has(e)&&(r=t.get(e),t.delete(e)),r}function fn(t){return t!==null&&typeof t=="object"?t.valueOf():t}const hn=Math.sqrt(50),dn=Math.sqrt(10),gn=Math.sqrt(2);function X(t,n,r){const e=(n-t)/Math.max(0,r),i=Math.floor(Math.log10(e)),a=e/Math.pow(10,i),s=a>=hn?10:a>=dn?5:a>=gn?2:1;let u,c,o;return i<0?(o=Math.pow(10,-i)/s,u=Math.round(t*o),c=Math.round(n*o),u/o<t&&++u,c/o>n&&--c,o=-o):(o=Math.pow(10,i)*s,u=Math.round(t/o),c=Math.round(n/o),u*o<t&&++u,c*o>n&&--c),c<u&&.5<=r&&r<2?X(t,n,r*2):[u,c,o]}function pn(t,n,r){if(n=+n,t=+t,r=+r,!(r>0))return[];if(t===n)return[t];const e=n<t,[i,a,s]=e?X(n,t,r):X(t,n,r);if(!(a>=i))return[];const u=a-i+1,c=new Array(u);if(e)if(s<0)for(let o=0;o<u;++o)c[o]=(a-o)/-s;else for(let o=0;o<u;++o)c[o]=(a-o)*s;else if(s<0)for(let o=0;o<u;++o)c[o]=(i+o)/-s;else for(let o=0;o<u;++o)c[o]=(i+o)*s;return c}function tt(t,n,r){return n=+n,t=+t,r=+r,X(t,n,r)[2]}function mn(t,n,r){n=+n,t=+t,r=+r;const e=n<t,i=e?tt(n,t,r):tt(t,n,r);return(e?-1:1)*(i<0?1/-i:i)}function yn(t){return t}var Z=1,J=2,nt=3,T=4,mt=1e-6;function xn(t){return"translate("+t+",0)"}function _n(t){return"translate(0,"+t+")"}function vn(t){return n=>+t(n)}function wn(t,n){return n=Math.max(0,t.bandwidth()-n*2)/2,t.round()&&(n=Math.round(n)),r=>+t(r)+n}function Mn(){return!this.__axis}function Lt(t,n){var r=[],e=null,i=null,a=6,s=6,u=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,o=t===Z||t===T?-1:1,f=t===T||t===J?"x":"y",l=t===Z||t===nt?xn:_n;function h(g){var x=e??(n.ticks?n.ticks.apply(n,r):n.domain()),d=i??(n.tickFormat?n.tickFormat.apply(n,r):yn),m=Math.max(a,0)+u,p=n.range(),_=+p[0]+c,w=+p[p.length-1]+c,b=(n.bandwidth?wn:vn)(n.copy(),c),v=g.selection?g.selection():g,z=v.selectAll(".domain").data([null]),A=v.selectAll(".tick").data(x,n).order(),S=A.exit(),F=A.enter().append("g").attr("class","tick"),N=A.select("line"),y=A.select("text");z=z.merge(z.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),A=A.merge(F),N=N.merge(F.append("line").attr("stroke","currentColor").attr(f+"2",o*a)),y=y.merge(F.append("text").attr("fill","currentColor").attr(f,o*m).attr("dy",t===Z?"0em":t===nt?"0.71em":"0.32em")),g!==v&&(z=z.transition(g),A=A.transition(g),N=N.transition(g),y=y.transition(g),S=S.transition(g).attr("opacity",mt).attr("transform",function(k){return isFinite(k=b(k))?l(k+c):this.getAttribute("transform")}),F.attr("opacity",mt).attr("transform",function(k){var M=this.parentNode.__axis;return l((M&&isFinite(M=M(k))?M:b(k))+c)})),S.remove(),z.attr("d",t===T||t===J?s?"M"+o*s+","+_+"H"+c+"V"+w+"H"+o*s:"M"+c+","+_+"V"+w:s?"M"+_+","+o*s+"V"+c+"H"+w+"V"+o*s:"M"+_+","+c+"H"+w),A.attr("opacity",1).attr("transform",function(k){return l(b(k)+c)}),N.attr(f+"2",o*a),y.attr(f,o*m).text(d),v.filter(Mn).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===J?"start":t===T?"end":"middle"),v.each(function(){this.__axis=b})}return h.scale=function(g){return arguments.length?(n=g,h):n},h.ticks=function(){return r=Array.from(arguments),h},h.tickArguments=function(g){return arguments.length?(r=g==null?[]:Array.from(g),h):r.slice()},h.tickValues=function(g){return arguments.length?(e=g==null?null:Array.from(g),h):e&&e.slice()},h.tickFormat=function(g){return arguments.length?(i=g,h):i},h.tickSize=function(g){return arguments.length?(a=s=+g,h):a},h.tickSizeInner=function(g){return arguments.length?(a=+g,h):a},h.tickSizeOuter=function(g){return arguments.length?(s=+g,h):s},h.tickPadding=function(g){return arguments.length?(u=+g,h):u},h.offset=function(g){return arguments.length?(c=+g,h):c},h}function kn(t){return Lt(nt,t)}function Nn(t){return Lt(T,t)}function bn(t,n){n||(n=[]);var r=t?Math.min(n.length,t.length):0,e=n.slice(),i;return function(a){for(i=0;i<r;++i)e[i]=t[i]*(1-a)+n[i]*a;return e}}function An(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Sn(t,n){var r=n?n.length:0,e=t?Math.min(r,t.length):0,i=new Array(e),a=new Array(r),s;for(s=0;s<e;++s)i[s]=at(t[s],n[s]);for(;s<r;++s)a[s]=n[s];return function(u){for(s=0;s<e;++s)a[s]=i[s](u);return a}}function $n(t,n){var r=new Date;return t=+t,n=+n,function(e){return r.setTime(t*(1-e)+n*e),r}}function Pn(t,n){var r={},e={},i;(t===null||typeof t!="object")&&(t={}),(n===null||typeof n!="object")&&(n={});for(i in n)i in t?r[i]=at(t[i],n[i]):e[i]=n[i];return function(a){for(i in r)e[i]=r[i](a);return e}}function at(t,n){var r=typeof n,e;return n==null||r==="boolean"?Ht(n):(r==="number"?K:r==="string"?(e=ft(n))?(n=e,ht):Xt:n instanceof ft?ht:n instanceof Date?$n:An(n)?bn:Array.isArray(n)?Sn:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?Pn:K)(t,n)}function zn(t,n){return t=+t,n=+n,function(r){return Math.round(t*(1-r)+n*r)}}function Fn(t){const n=+this._x.call(null,t),r=+this._y.call(null,t);return qt(this.cover(n,r),n,r,t)}function qt(t,n,r,e){if(isNaN(n)||isNaN(r))return t;var i,a=t._root,s={data:e},u=t._x0,c=t._y0,o=t._x1,f=t._y1,l,h,g,x,d,m,p,_;if(!a)return t._root=s,t;for(;a.length;)if((d=n>=(l=(u+o)/2))?u=l:o=l,(m=r>=(h=(c+f)/2))?c=h:f=h,i=a,!(a=a[p=m<<1|d]))return i[p]=s,t;if(g=+t._x.call(null,a.data),x=+t._y.call(null,a.data),n===g&&r===x)return s.next=a,i?i[p]=s:t._root=s,t;do i=i?i[p]=new Array(4):t._root=new Array(4),(d=n>=(l=(u+o)/2))?u=l:o=l,(m=r>=(h=(c+f)/2))?c=h:f=h;while((p=m<<1|d)===(_=(x>=h)<<1|g>=l));return i[_]=a,i[p]=s,t}function jn(t){var n,r,e=t.length,i,a,s=new Array(e),u=new Array(e),c=1/0,o=1/0,f=-1/0,l=-1/0;for(r=0;r<e;++r)isNaN(i=+this._x.call(null,n=t[r]))||isNaN(a=+this._y.call(null,n))||(s[r]=i,u[r]=a,i<c&&(c=i),i>f&&(f=i),a<o&&(o=a),a>l&&(l=a));if(c>f||o>l)return this;for(this.cover(c,o).cover(f,l),r=0;r<e;++r)qt(this,s[r],u[r],t[r]);return this}function En(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var r=this._x0,e=this._y0,i=this._x1,a=this._y1;if(isNaN(r))i=(r=Math.floor(t))+1,a=(e=Math.floor(n))+1;else{for(var s=i-r||1,u=this._root,c,o;r>t||t>=i||e>n||n>=a;)switch(o=(n<e)<<1|t<r,c=new Array(4),c[o]=u,u=c,s*=2,o){case 0:i=r+s,a=e+s;break;case 1:r=i-s,a=e+s;break;case 2:i=r+s,e=a-s;break;case 3:r=i-s,e=a-s;break}this._root&&this._root.length&&(this._root=u)}return this._x0=r,this._y0=e,this._x1=i,this._y1=a,this}function In(){var t=[];return this.visit(function(n){if(!n.length)do t.push(n.data);while(n=n.next)}),t}function Bn(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function $(t,n,r,e,i){this.node=t,this.x0=n,this.y0=r,this.x1=e,this.y1=i}function Ln(t,n,r){var e,i=this._x0,a=this._y0,s,u,c,o,f=this._x1,l=this._y1,h=[],g=this._root,x,d;for(g&&h.push(new $(g,i,a,f,l)),r==null?r=1/0:(i=t-r,a=n-r,f=t+r,l=n+r,r*=r);x=h.pop();)if(!(!(g=x.node)||(s=x.x0)>f||(u=x.y0)>l||(c=x.x1)<i||(o=x.y1)<a))if(g.length){var m=(s+c)/2,p=(u+o)/2;h.push(new $(g[3],m,p,c,o),new $(g[2],s,p,m,o),new $(g[1],m,u,c,p),new $(g[0],s,u,m,p)),(d=(n>=p)<<1|t>=m)&&(x=h[h.length-1],h[h.length-1]=h[h.length-1-d],h[h.length-1-d]=x)}else{var _=t-+this._x.call(null,g.data),w=n-+this._y.call(null,g.data),b=_*_+w*w;if(b<r){var v=Math.sqrt(r=b);i=t-v,a=n-v,f=t+v,l=n+v,e=g.data}}return e}function qn(t){if(isNaN(f=+this._x.call(null,t))||isNaN(l=+this._y.call(null,t)))return this;var n,r=this._root,e,i,a,s=this._x0,u=this._y0,c=this._x1,o=this._y1,f,l,h,g,x,d,m,p;if(!r)return this;if(r.length)for(;;){if((x=f>=(h=(s+c)/2))?s=h:c=h,(d=l>=(g=(u+o)/2))?u=g:o=g,n=r,!(r=r[m=d<<1|x]))return this;if(!r.length)break;(n[m+1&3]||n[m+2&3]||n[m+3&3])&&(e=n,p=m)}for(;r.data!==t;)if(i=r,!(r=r.next))return this;return(a=r.next)&&delete r.next,i?(a?i.next=a:delete i.next,this):n?(a?n[m]=a:delete n[m],(r=n[0]||n[1]||n[2]||n[3])&&r===(n[3]||n[2]||n[1]||n[0])&&!r.length&&(e?e[p]=r:this._root=r),this):(this._root=a,this)}function Cn(t){for(var n=0,r=t.length;n<r;++n)this.remove(t[n]);return this}function Tn(){return this._root}function Vn(){var t=0;return this.visit(function(n){if(!n.length)do++t;while(n=n.next)}),t}function Dn(t){var n=[],r,e=this._root,i,a,s,u,c;for(e&&n.push(new $(e,this._x0,this._y0,this._x1,this._y1));r=n.pop();)if(!t(e=r.node,a=r.x0,s=r.y0,u=r.x1,c=r.y1)&&e.length){var o=(a+u)/2,f=(s+c)/2;(i=e[3])&&n.push(new $(i,o,f,u,c)),(i=e[2])&&n.push(new $(i,a,f,o,c)),(i=e[1])&&n.push(new $(i,o,s,u,f)),(i=e[0])&&n.push(new $(i,a,s,o,f))}return this}function Rn(t){var n=[],r=[],e;for(this._root&&n.push(new $(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var a,s=e.x0,u=e.y0,c=e.x1,o=e.y1,f=(s+c)/2,l=(u+o)/2;(a=i[0])&&n.push(new $(a,s,u,f,l)),(a=i[1])&&n.push(new $(a,f,u,c,l)),(a=i[2])&&n.push(new $(a,s,l,f,o)),(a=i[3])&&n.push(new $(a,f,l,c,o))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this}function On(t){return t[0]}function Yn(t){return arguments.length?(this._x=t,this):this._x}function Hn(t){return t[1]}function Xn(t){return arguments.length?(this._y=t,this):this._y}function Ct(t,n,r){var e=new ot(n??On,r??Hn,NaN,NaN,NaN,NaN);return t==null?e:e.addAll(t)}function ot(t,n,r,e,i,a){this._x=t,this._y=n,this._x0=r,this._y0=e,this._x1=i,this._y1=a,this._root=void 0}function yt(t){for(var n={data:t.data},r=n;t=t.next;)r=r.next={data:t.data};return n}var P=Ct.prototype=ot.prototype;P.copy=function(){var t=new ot(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,r,e;if(!n)return t;if(!n.length)return t._root=yt(n),t;for(r=[{source:n,target:t._root=new Array(4)}];n=r.pop();)for(var i=0;i<4;++i)(e=n.source[i])&&(e.length?r.push({source:e,target:n.target[i]=new Array(4)}):n.target[i]=yt(e));return t};P.add=Fn;P.addAll=jn;P.cover=En;P.data=In;P.extent=Bn;P.find=Ln;P.remove=qn;P.removeAll=Cn;P.root=Tn;P.size=Vn;P.visit=Dn;P.visitAfter=Rn;P.x=Yn;P.y=Xn;function j(t){return function(){return t}}function xt(t){return(t()-.5)*1e-6}function Gn(t){return t.x+t.vx}function Wn(t){return t.y+t.vy}function _t(t){var n,r,e,i=1,a=1;typeof t!="function"&&(t=j(t==null?1:+t));function s(){for(var o,f=n.length,l,h,g,x,d,m,p=0;p<a;++p)for(l=Ct(n,Gn,Wn).visitAfter(u),o=0;o<f;++o)h=n[o],d=r[h.index],m=d*d,g=h.x+h.vx,x=h.y+h.vy,l.visit(_);function _(w,b,v,z,A){var S=w.data,F=w.r,N=d+F;if(S){if(S.index>h.index){var y=g-S.x-S.vx,k=x-S.y-S.vy,M=y*y+k*k;M<N*N&&(y===0&&(y=xt(e),M+=y*y),k===0&&(k=xt(e),M+=k*k),M=(N-(M=Math.sqrt(M)))/M*i,h.vx+=(y*=M)*(N=(F*=F)/(m+F)),h.vy+=(k*=M)*N,S.vx-=y*(N=1-N),S.vy-=k*N)}return}return b>g+N||z<g-N||v>x+N||A<x-N}}function u(o){if(o.data)return o.r=r[o.data.index];for(var f=o.r=0;f<4;++f)o[f]&&o[f].r>o.r&&(o.r=o[f].r)}function c(){if(n){var o,f=n.length,l;for(r=new Array(f),o=0;o<f;++o)l=n[o],r[l.index]=+t(l,o,n)}}return s.initialize=function(o,f){n=o,e=f,c()},s.iterations=function(o){return arguments.length?(a=+o,s):a},s.strength=function(o){return arguments.length?(i=+o,s):i},s.radius=function(o){return arguments.length?(t=typeof o=="function"?o:j(+o),c(),s):t},s}const Qn=1664525,Un=1013904223,vt=4294967296;function Zn(){let t=1;return()=>(t=(Qn*t+Un)%vt)/vt}var Jn=10,Kn=Math.PI*(3-Math.sqrt(5));function wt(t){var n,r=1,e=.001,i=1-Math.pow(e,1/300),a=0,s=.6,u=new Map,c=Gt(l),o=Wt("tick","end"),f=Zn();t==null&&(t=[]);function l(){h(),o.call("tick",n),r<e&&(c.stop(),o.call("end",n))}function h(d){var m,p=t.length,_;d===void 0&&(d=1);for(var w=0;w<d;++w)for(r+=(a-r)*i,u.forEach(function(b){b(r)}),m=0;m<p;++m)_=t[m],_.fx==null?_.x+=_.vx*=s:(_.x=_.fx,_.vx=0),_.fy==null?_.y+=_.vy*=s:(_.y=_.fy,_.vy=0);return n}function g(){for(var d=0,m=t.length,p;d<m;++d){if(p=t[d],p.index=d,p.fx!=null&&(p.x=p.fx),p.fy!=null&&(p.y=p.fy),isNaN(p.x)||isNaN(p.y)){var _=Jn*Math.sqrt(.5+d),w=d*Kn;p.x=_*Math.cos(w),p.y=_*Math.sin(w)}(isNaN(p.vx)||isNaN(p.vy))&&(p.vx=p.vy=0)}}function x(d){return d.initialize&&d.initialize(t,f),d}return g(),n={tick:h,restart:function(){return c.restart(l),n},stop:function(){return c.stop(),n},nodes:function(d){return arguments.length?(t=d,g(),u.forEach(x),n):t},alpha:function(d){return arguments.length?(r=+d,n):r},alphaMin:function(d){return arguments.length?(e=+d,n):e},alphaDecay:function(d){return arguments.length?(i=+d,n):+i},alphaTarget:function(d){return arguments.length?(a=+d,n):a},velocityDecay:function(d){return arguments.length?(s=1-d,n):1-s},randomSource:function(d){return arguments.length?(f=d,u.forEach(x),n):f},force:function(d,m){return arguments.length>1?(m==null?u.delete(d):u.set(d,x(m)),n):u.get(d)},find:function(d,m,p){var _=0,w=t.length,b,v,z,A,S;for(p==null?p=1/0:p*=p,_=0;_<w;++_)A=t[_],b=d-A.x,v=m-A.y,z=b*b+v*v,z<p&&(S=A,p=z);return S},on:function(d,m){return arguments.length>1?(o.on(d,m),n):o.on(d)}}}function Mt(t){var n=j(.1),r,e,i;typeof t!="function"&&(t=j(t==null?0:+t));function a(u){for(var c=0,o=r.length,f;c<o;++c)f=r[c],f.vx+=(i[c]-f.x)*e[c]*u}function s(){if(r){var u,c=r.length;for(e=new Array(c),i=new Array(c),u=0;u<c;++u)e[u]=isNaN(i[u]=+t(r[u],u,r))?0:+n(r[u],u,r)}}return a.initialize=function(u){r=u,s()},a.strength=function(u){return arguments.length?(n=typeof u=="function"?u:j(+u),s(),a):n},a.x=function(u){return arguments.length?(t=typeof u=="function"?u:j(+u),s(),a):t},a}function kt(t){var n=j(.1),r,e,i;typeof t!="function"&&(t=j(t==null?0:+t));function a(u){for(var c=0,o=r.length,f;c<o;++c)f=r[c],f.vy+=(i[c]-f.y)*e[c]*u}function s(){if(r){var u,c=r.length;for(e=new Array(c),i=new Array(c),u=0;u<c;++u)e[u]=isNaN(i[u]=+t(r[u],u,r))?0:+n(r[u],u,r)}}return a.initialize=function(u){r=u,s()},a.strength=function(u){return arguments.length?(n=typeof u=="function"?u:j(+u),s(),a):n},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:j(+u),s(),a):t},a}function tr(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function G(t,n){if((r=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var r,e=t.slice(0,r);return[e.length>1?e[0]+e.slice(2):e,+t.slice(r+1)]}function q(t){return t=G(Math.abs(t)),t?t[1]:NaN}function nr(t,n){return function(r,e){for(var i=r.length,a=[],s=0,u=t[0],c=0;i>0&&u>0&&(c+u+1>e&&(u=Math.max(1,e-c)),a.push(r.substring(i-=u,i+u)),!((c+=u+1)>e));)u=t[s=(s+1)%t.length];return a.reverse().join(n)}}function rr(t){return function(n){return n.replace(/[0-9]/g,function(r){return t[+r]})}}var er=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function W(t){if(!(n=er.exec(t)))throw new Error("invalid format: "+t);var n;return new st({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}W.prototype=st.prototype;function st(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}st.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ir(t){t:for(var n=t.length,r=1,e=-1,i;r<n;++r)switch(t[r]){case".":e=i=r;break;case"0":e===0&&(e=r),i=r;break;default:if(!+t[r])break t;e>0&&(e=0);break}return e>0?t.slice(0,e)+t.slice(i+1):t}var Tt;function ar(t,n){var r=G(t,n);if(!r)return t+"";var e=r[0],i=r[1],a=i-(Tt=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=e.length;return a===s?e:a>s?e+new Array(a-s+1).join("0"):a>0?e.slice(0,a)+"."+e.slice(a):"0."+new Array(1-a).join("0")+G(t,Math.max(0,n+a-1))[0]}function Nt(t,n){var r=G(t,n);if(!r)return t+"";var e=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+e:e.length>i+1?e.slice(0,i+1)+"."+e.slice(i+1):e+new Array(i-e.length+2).join("0")}const bt={"%":(t,n)=>(t*100).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:tr,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>Nt(t*100,n),r:Nt,s:ar,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function At(t){return t}var St=Array.prototype.map,$t=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function or(t){var n=t.grouping===void 0||t.thousands===void 0?At:nr(St.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",e=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?At:rr(St.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",u=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function o(l){l=W(l);var h=l.fill,g=l.align,x=l.sign,d=l.symbol,m=l.zero,p=l.width,_=l.comma,w=l.precision,b=l.trim,v=l.type;v==="n"?(_=!0,v="g"):bt[v]||(w===void 0&&(w=12),b=!0,v="g"),(m||h==="0"&&g==="=")&&(m=!0,h="0",g="=");var z=d==="$"?r:d==="#"&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",A=d==="$"?e:/[%p]/.test(v)?s:"",S=bt[v],F=/[defgprs%]/.test(v);w=w===void 0?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function N(y){var k=z,M=A,B,lt,V;if(v==="c")M=S(y)+M,y="";else{y=+y;var D=y<0||1/y<0;if(y=isNaN(y)?c:S(Math.abs(y),w),b&&(y=ir(y)),D&&+y==0&&x!=="+"&&(D=!1),k=(D?x==="("?x:u:x==="-"||x==="("?"":x)+k,M=(v==="s"?$t[8+Tt/3]:"")+M+(D&&x==="("?")":""),F){for(B=-1,lt=y.length;++B<lt;)if(V=y.charCodeAt(B),48>V||V>57){M=(V===46?i+y.slice(B+1):y.slice(B))+M,y=y.slice(0,B);break}}}_&&!m&&(y=n(y,1/0));var R=k.length+y.length+M.length,I=R<p?new Array(p-R+1).join(h):"";switch(_&&m&&(y=n(I+y,I.length?p-M.length:1/0),I=""),g){case"<":y=k+y+M+I;break;case"=":y=k+I+y+M;break;case"^":y=I.slice(0,R=I.length>>1)+k+y+M+I.slice(R);break;default:y=I+k+y+M;break}return a(y)}return N.toString=function(){return l+""},N}function f(l,h){var g=o((l=W(l),l.type="f",l)),x=Math.max(-8,Math.min(8,Math.floor(q(h)/3)))*3,d=Math.pow(10,-x),m=$t[8+x/3];return function(p){return g(d*p)+m}}return{format:o,formatPrefix:f}}var O,ut,Vt;sr({thousands:",",grouping:[3],currency:["$",""]});function sr(t){return O=or(t),ut=O.format,Vt=O.formatPrefix,O}function ur(t){return Math.max(0,-q(Math.abs(t)))}function cr(t,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(q(n)/3)))*3-q(Math.abs(t)))}function lr(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,q(n)-q(t))+1}function ct(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t);break}return this}const Pt=Symbol("implicit");function rt(){var t=new gt,n=[],r=[],e=Pt;function i(a){let s=t.get(a);if(s===void 0){if(e!==Pt)return e;t.set(a,s=n.push(a)-1)}return r[s%r.length]}return i.domain=function(a){if(!arguments.length)return n.slice();n=[],t=new gt;for(const s of a)t.has(s)||t.set(s,n.push(s)-1);return i},i.range=function(a){return arguments.length?(r=Array.from(a),i):r.slice()},i.unknown=function(a){return arguments.length?(e=a,i):e},i.copy=function(){return rt(n,r).unknown(e)},ct.apply(i,arguments),i}function fr(t){return function(){return t}}function hr(t){return+t}var zt=[0,1];function E(t){return t}function et(t,n){return(n-=t=+t)?function(r){return(r-t)/n}:fr(isNaN(n)?NaN:.5)}function dr(t,n){var r;return t>n&&(r=t,t=n,n=r),function(e){return Math.max(t,Math.min(n,e))}}function gr(t,n,r){var e=t[0],i=t[1],a=n[0],s=n[1];return i<e?(e=et(i,e),a=r(s,a)):(e=et(e,i),a=r(a,s)),function(u){return a(e(u))}}function pr(t,n,r){var e=Math.min(t.length,n.length)-1,i=new Array(e),a=new Array(e),s=-1;for(t[e]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++s<e;)i[s]=et(t[s],t[s+1]),a[s]=r(n[s],n[s+1]);return function(u){var c=un(t,u,1,e)-1;return a[c](i[c](u))}}function Dt(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Rt(){var t=zt,n=zt,r=at,e,i,a,s=E,u,c,o;function f(){var h=Math.min(t.length,n.length);return s!==E&&(s=dr(t[0],t[h-1])),u=h>2?pr:gr,c=o=null,l}function l(h){return h==null||isNaN(h=+h)?a:(c||(c=u(t.map(e),n,r)))(e(s(h)))}return l.invert=function(h){return s(i((o||(o=u(n,t.map(e),K)))(h)))},l.domain=function(h){return arguments.length?(t=Array.from(h,hr),f()):t.slice()},l.range=function(h){return arguments.length?(n=Array.from(h),f()):n.slice()},l.rangeRound=function(h){return n=Array.from(h),r=zn,f()},l.clamp=function(h){return arguments.length?(s=h?!0:E,f()):s!==E},l.interpolate=function(h){return arguments.length?(r=h,f()):r},l.unknown=function(h){return arguments.length?(a=h,l):a},function(h,g){return e=h,i=g,f()}}function mr(){return Rt()(E,E)}function yr(t,n,r,e){var i=mn(t,n,r),a;switch(e=W(e??",f"),e.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(n));return e.precision==null&&!isNaN(a=cr(i,s))&&(e.precision=a),Vt(e,s)}case"":case"e":case"g":case"p":case"r":{e.precision==null&&!isNaN(a=lr(i,Math.max(Math.abs(t),Math.abs(n))))&&(e.precision=a-(e.type==="e"));break}case"f":case"%":{e.precision==null&&!isNaN(a=ur(i))&&(e.precision=a-(e.type==="%")*2);break}}return ut(e)}function Ot(t){var n=t.domain;return t.ticks=function(r){var e=n();return pn(e[0],e[e.length-1],r??10)},t.tickFormat=function(r,e){var i=n();return yr(i[0],i[i.length-1],r??10,e)},t.nice=function(r){r==null&&(r=10);var e=n(),i=0,a=e.length-1,s=e[i],u=e[a],c,o,f=10;for(u<s&&(o=s,s=u,u=o,o=i,i=a,a=o);f-- >0;){if(o=tt(s,u,r),o===c)return e[i]=s,e[a]=u,n(e);if(o>0)s=Math.floor(s/o)*o,u=Math.ceil(u/o)*o;else if(o<0)s=Math.ceil(s*o)/o,u=Math.floor(u*o)/o;else break;c=o}return t},t}function it(){var t=mr();return t.copy=function(){return Dt(t,it())},ct.apply(t,arguments),Ot(t)}function Ft(t){return function(n){return n<0?-Math.pow(-n,t):Math.pow(n,t)}}function xr(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function _r(t){return t<0?-t*t:t*t}function vr(t){var n=t(E,E),r=1;function e(){return r===1?t(E,E):r===.5?t(xr,_r):t(Ft(r),Ft(1/r))}return n.exponent=function(i){return arguments.length?(r=+i,e()):r},Ot(n)}function Yt(){var t=vr(Rt());return t.copy=function(){return Dt(t,Yt()).exponent(t.exponent())},ct.apply(t,arguments),t}function wr(){return Yt.apply(null,arguments).exponent(.5)}const Mr={data(){return{stations:{},land50:{},ice:{}}},async mounted(){let t=this;try{let n=await Q.get("./data/land-50m.json");t.land50=n.data,n=await Q.get("./data/stations.json"),t.stations=n.data,n=await Q.get("./data/iceedge23105.json"),t.ice=n.data;let r={width:window.innerWidth,height:window.innerHeight,center:[0,90,0],scaleFactor:.46,translateFactor:[.5,.5],legend:!0,scaleBar:2e3},e=document.getElementById("station-map");e.appendChild(this.drawmap(r)),e=document.getElementById("time-chart");let i=document.querySelector("#time-chart");e.appendChild(this.createScatterPlot(i.offsetWidth,i.offsetHeight))}catch(n){console.log(n)}},methods:{createScatterPlot(t,n){const r={top:20,right:20,bottom:60,left:60},e=t-r.left-r.right,i=n-r.top-r.bottom;let a=this.stations;for(var s=wt(a).force("collide",_t().radius(.3)).force("x",Mt().x(function(d){return d.Year_est})).force("y",kt().y(i/1.1)).stop(),u=0;u<200;++u)s.tick();var c=rt().domain(["Permanent active stations","Subantarctic station","Summer-only active station"]).range(["#2E7AF9","orange","red"]);const o=dt("svg").attr("viewBox",[0,0,t,n]).style("user-select","none").style("-webkit-user-select","none"),f=it().domain(U(a,d=>d.x)).range([0,e]),l=it().domain(U(a,d=>d.y)).range([i,0]),h=kn(f).tickSizeOuter(0).tickSize(10);Nn(l).tickSizeOuter(0),o.append("g").attr("transform",`translate(${r.left}, ${i/2+r.top})`).call(h).append("text").attr("x",e/2).attr("y",70).attr("fill","#000").attr("text-anchor","middle").text("Year of Establishment");function g(d){const b=(d- -1)/161;return Math.sqrt((255-9)*b+9)}var x=L("#tooltip3");return o.selectAll("circle").data(a).enter().append("circle").attr("id",function(d){return"scatter-"+d.id}).attr("cx",d=>f(d.x)).attr("cy",d=>l(d.y)).attr("r",d=>g(d.max_Pop)/4+2).style("opacity",.7).attr("fill",function(d){return c(d.type)}).attr("transform",`translate(${r.left}, ${r.top})`).on("mouseover",function(d){L(this).attr("r",p=>g(p.max_Pop)/4+4).attr("stroke-width",2).attr("stroke","#000");var m=d.target.__data__;C(".station-"+m.id).attr("r",function(p){return g(p.max_Pop)+3}).attr("stroke-width",2).attr("stroke","#000"),x.html("<strong>Location: </strong>"+m.Location+"<br/><strong>Latitude: </strong>"+m.lat+"<br/><strong>Lontitude: </strong>"+m.lon+"<br/><strong>Country: </strong>"+m.Country+"<br/><strong>Year: </strong>"+m.Year_est+"<br/><strong>Type: </strong>"+m.type+"<br/><strong>Max Population: </strong>"+m.max_Pop+"<br/>").style("visibility","visible")}).on("mouseout",function(d){x.style("visibility","hidden"),L(this).attr("r",p=>g(p.max_Pop)/4+2).attr("stroke","none");var m=d.target.__data__;C(".station-"+m.id).attr("r",function(p){return g(p.max_Pop)}).attr("stroke","none")}),o.node()},drawmap(t){let n=t.width,r=t.height;const e=dt("svg").attr("viewBox",[0,0,n,r]).style("background","#fff").style("user-select","none").style("-webkit-user-select","none"),i=Qt().rotate(t.center).scale(n*t.scaleFactor).translate([n*t.translateFactor[0],r*t.translateFactor[1]]),a=Ut(i);if(e.append("path").datum(Zt()).attr("d",a).attr("fill","none").attr("stroke-width",.25).attr("stroke","#000").style("opacity",.3),e.append("path").datum(this.ice).attr("d",a).attr("id","ice-edge").attr("fill","lightblue").style("opacity",.3).attr("stroke-width",5).attr("stroke","lightblue").style("opacity",.3),e.append("path").datum(Jt(this.land50,this.land50.objects.land)).attr("d",a).attr("fill","white").attr("stroke-width",1).attr("stroke","#000"),this.addPoint(e,i),t.legend&&this.addLegendsToMap(e,n),t.scaleBar){const s=nn().projection(i).size([n,r]).left(.7).top(.9).distance(t.scaleBar).label(t.scaleBar+" km").labelAnchor("middle").tickSize(null).tickValues(null);e.append("g").attr("class","scalebar").call(s)}return e.node()},addLegendsToMap(t,n){let r=n-25,e=t.append("g").attr("transform",`translate(${r}, 35)`).attr("text-anchor","end");e.append("text").text("Research Stations in antarctica, 2023").attr("font-weight","bold");let i=0;e.append("circle").attr("r",5).attr("fill","#2E7AF9").attr("transform",`translate(${i}, 20)`).attr("class","legend-text"),e.append("circle").attr("r",5).attr("fill","orange").attr("transform",`translate(${i}, 40)`).attr("class","legend-text"),e.append("circle").attr("r",5).attr("fill","#e9536c").attr("transform",`translate(${i}, 60)`).attr("class","legend-text"),e.append("circle").attr("r",5).attr("fill","lightblue").style("opacity",.3).attr("transform",`translate(${i}, 90)`).attr("class","legend-text"),e.append("text").text("Permanent active stations").attr("transform",`translate(${i-10}, 25)`).attr("class","legend-text"),e.append("text").text("Subantarctic stations").attr("transform",`translate(${i-10}, 45)`).attr("class","legend-text"),e.append("text").text("Summer-only active stations").attr("transform",`translate(${i-10}, 65)`).attr("class","legend-text"),e.append("text").text("Sea ice").attr("transform",`translate(${i-10}, 95)`).attr("class","legend-text"),e.append("text").text("max population").attr("transform",`translate(${i},135)`).attr("font-weight","bold").attr("class","legend-text");let a=U(this.stations.map(c=>c.max_Pop)),s=wr().domain(a).range([4,30]),u=e.append("g").attr("fill","black").attr("transform",`translate(${i-60},185)`).attr("text-anchor","right").selectAll("g").data([1,160,1e3]).join("g");u.append("circle").attr("fill","none").attr("stroke","black").attr("cx",-20).attr("cy",c=>30-s(c)).attr("r",s),u.append("text").attr("y",c=>20-2*s(c)).attr("x",55).attr("dy","1.4em").text(ut(".0f")).attr("class","legend-text")},addPoint(t,n){var r=rt().domain(["Permanent active stations","Subantarctic station","Summer-only active station"]).range(["#2E7AF9","orange","red"]),e=L("#tooltip");let i=this.stations;function a(o){const x=(o- -1)/161;return Math.sqrt((255-9)*x+9)}for(var s=wt(i).force("collide",_t().radius(function(o){return a(o.max_Pop)+1})).force("x",Mt().x(function(o){return n([o.lon,o.lat])[0]})).force("y",kt().y(function(o){return n([o.lon,o.lat])[1]})).stop(),u=0;u<500;++u)s.tick();var c=t.selectAll("circle").data(i).enter().append("circle").attr("class",function(o){return"station-"+o.id}).attr("cx",function(o){return o.x}).attr("cy",function(o){return o.y}).attr("r",function(o){return a(o.max_Pop)}).attr("stroke-width",1).attr("stroke","white").attr("fill",function(o){return r(o.type)}).style("opacity",.8);c.on("mouseover",function(o){var f=o.target.__data__;e.html("<strong>Location: </strong>"+f.Location+"<br/><strong>Latitude: </strong>"+f.lat+"<br/><strong>Longitude: </strong>"+f.lon+"<br/><strong>Country: </strong>"+f.Country+"<br/><strong>Yesr: </strong>"+f.Year_est+"<br/><strong>Type: </strong>"+f.type+"<br/><strong>Max Population: </strong>"+f.max_Pop+"<br/>").style("visibility","visible"),L(this).attr("r",function(l){return a(l.max_Pop)+3}).attr("stroke-width",2).attr("stroke","#000"),C("#scatter-"+f.id).attr("r",l=>a(l.max_Pop)/4+4).attr("stroke-width",2).attr("stroke","#000")}).on("mousemove",function(o){}).on("mouseout",function(o){e.style("visibility","hidden"),L(this).attr("fill",function(l){return r(l.type)}).attr("r",function(l){return a(l.max_Pop)}).attr("stroke","none");var f=o.target.__data__;C(".station-"+f.id).attr("fill",function(l){return r(l.type)}).attr("r",function(l){return a(l.max_Pop)}).attr("stroke","none"),C("#scatter-"+f.id).attr("r",l=>a(l.max_Pop)/4+2).attr("stroke","none")})}}},kr={class:"map-frame"},Nr=Y("div",{id:"station-map"},[Y("div",{id:"time-chart"}),Y("div",{id:"tooltip3"})],-1),br=[Nr];function Ar(t,n,r,e,i,a){return Et(),It("div",kr,br)}const Sr=jt(Mr,[["render",Ar]]);const $r={name:"ChapterOne",components:{stationMap:Sr},data(){return{}},mounted(){},created(){window.scrollTo(0,0)},methods:{}},Pr={class:"container"},zr={class:"sibling"};function Fr(t,n,r,e,i,a){const s=Kt("stationMap");return Et(),It("div",Pr,[Y("div",zr,[tn(s)])])}const Ir=jt($r,[["render",Fr],["__scopeId","data-v-05102cd0"]]);export{Ir as default};
