import{S as Y,v as st,w as ut}from"./index-b49bf989.js";function Pt(t){return typeof t=="string"?new Y([document.querySelectorAll(t)],[document.documentElement]):new Y([st(t)],ut)}function ct(){return new q}function q(){this.reset()}q.prototype={constructor:q,reset:function(){this.s=this.t=0},add:function(t){Z(B,t,this.t),Z(this,B.s,this.s),this.s?this.t+=B.t:this.s=B.t},valueOf:function(){return this.s}};const B=new q;function Z(t,n,o){const a=t.s=n+o,i=a-n,u=a-i;t.t=n-u+(o-i)}function V(t,n){t&&tt.hasOwnProperty(t.type)&&tt[t.type](t,n)}const j={Feature:function(t,n){V(t.geometry,n)},FeatureCollection:function(t,n){let o=t.features,a=-1,i=o.length;for(;++a<i;)V(o[a].geometry,n)}},tt={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){let o=t.coordinates,a=-1,i=o.length;for(;++a<i;)t=o[a],n.point(t[0],t[1],t[2])},LineString:function(t,n){H(t.coordinates,n,0)},MultiLineString:function(t,n){let o=t.coordinates,a=-1,i=o.length;for(;++a<i;)H(o[a],n,0)},Polygon:function(t,n){nt(t.coordinates,n)},MultiPolygon:function(t,n){let o=t.coordinates,a=-1,i=o.length;for(;++a<i;)nt(o[a],n)},GeometryCollection:function(t,n){let o=t.geometries,a=-1,i=o.length;for(;++a<i;)V(o[a],n)}};function H(t,n,o){let a=-1,i=t.length-o,u;for(n.lineStart();++a<i;)u=t[a],n.point(u[0],u[1],u[2]);n.lineEnd()}function nt(t,n){let o=-1,a=t.length;for(n.polygonStart();++o<a;)H(t[o],n,1);n.polygonEnd()}function ht(t,n){t&&j.hasOwnProperty(t.type)?j[t.type](t,n):V(t,n)}let J=ct(),N,G,T;const x={sphere:t=>{},point:t=>{},lineStart:ft,lineEnd:t=>{},polygonStart:t=>{},polygonEnd:t=>{}};function ft(){x.point=dt,x.lineEnd=gt}function gt(){x.point=x.lineEnd=t=>{}}function dt(t,n){t*=Math.PI/180,n*=Math.PI/180,N=t,G=Math.sin(n),T=Math.cos(n),x.point=mt}function mt(t,n){t*=Math.PI/180,n*=Math.PI/180;const o=Math.sin(n),a=Math.cos(n),i=Math.abs(t-N),u=Math.cos(i),y=Math.sin(i),m=a*y,M=T*o-G*a*u,C=G*o+T*a*u;J.add(Math.atan2(Math.sqrt(m*m+M*M),C)),N=t,G=o,T=a}function pt(t){return J.reset(),ht(t,x),+J}const Q=[null,null],yt={type:"LineString",coordinates:Q};function et(t,n){return Q[0]=t,Q[1]=n,pt(yt)}function kt(){return 1}const rt={units:"kilometers",radius:6371.0088};function St(){let t=null,n,o=0,a=0,i=kt(),u=rt.radius,y=rt.units,m,M,C=e=>+e.toFixed(2),F=2,c=4,$,k,f="start",v=1,D=!0;function r(e){k=k===null?null:k||y.charAt(0).toUpperCase()+y.slice(1);let it=t[1][0]-t[0][0],at=t[1][1]-t[0][1],I=t[0][0]+it*o,O=t[0][1]+at*a,R=n.invert([I,O]),p=0,z=0;if(m)p=m,z=p/(et(R,n.invert([I+1,O]))*u);else{let l=.01,h=80/(D?1:v),S=0,ot=100,X=[1,2,4,5];for(;z<h&&S<ot;){for(let U=0,lt=X.length;U<lt&&(p=l*X[U],z=p/(et(R,n.invert([I+1,O]))*u),!(z>=h));U++);l*=10,S++}M=p}let g=p/(D?v:1),W=$===null?[]:$||[0,g/4,g/2,g],s=l=>l*z/(p/v),w=e.selection?e.selection():e,E=w.selectAll(".label").data([k]),P=w.selectAll(".domain").data([null]),d=w.selectAll(".tick").data(W,s).order(),_=d.exit(),L=d.enter().append("g").attr("class","tick"),b=d.select("line"),K=d.select("text"),A=d.select("rect");w.attr("font-family","sans-serif").attr("transform",`translate(${[I,O]})`),P=P.merge(P.enter().insert("path",".tick").attr("class","domain").attr("fill","none").attr("stroke","currentColor")),d=d.merge(L),b=b.merge(L.append("line").attr("stroke","currentColor").attr("y2",c*i)),K=K.merge(L.append("text").attr("fill","currentColor").attr("y",c*i+F*i).attr("font-size",10).attr("text-anchor","middle").attr("dy",`${i===1?.71:0}em`)),A=A.merge(L.append("rect").attr("fill",(l,h)=>h%2===0?"currentColor":"#fff").attr("stroke","currentColor").attr("stroke-width",.5).attr("width",(l,h,S)=>h===S.length-1?0:s(W[h+1]-l)).attr("y",i===1?0:-c).attr("height",c)),e!==w&&(d=d.transition(e),P=P.transition(e),A=A.transition(e),_=_.transition(e).attr("opacity",1e-6).attr("transform",l=>`translate(${s(l)})`),L.attr("opacity",1e-6).attr("transform",l=>`translate(${s(l)})`)),_.remove(),P.attr("d",`M${s(0)},${c*i} L${s(0)},0 L${s(g)},0 L${s(g)},${c*i}`),d.attr("transform",l=>`translate(${s(l)})`).attr("opacity",1),b.attr("y2",c*i),K.attr("y",c*i+F*i).text(C),A.attr("fill",(l,h)=>h%2===0?"currentColor":"#fff").attr("width",(l,h,S)=>h===S.length-1?0:s(W[h+1]-l)).attr("y",i===1?0:-c).attr("height",c),E===null?E.remove():(e!==w?E.transition(e).attr("x",f==="start"?0:s(f==="middle"?g/2:g)).attr("y",i===1?0:"1.3em").attr("text-anchor",f).text(l=>l):E.attr("x",f==="start"?0:s(f==="middle"?g/2:g)).attr("y",i===1?0:"1.3em").attr("text-anchor",f).text(l=>l),E.enter().append("text").attr("class","label").attr("fill","currentColor").attr("font-size",12).attr("dy","-0.32em").attr("x",f==="start"?0:s(f==="middle"?g/2:g)).attr("y",i===1?0:"1.3em").attr("text-anchor",f).text(l=>l))}return r.distance=function(e){return arguments.length?(m=+e,r):m||M},r.extent=function(e){return arguments.length?(t=e,r):t},r.label=function(e){return arguments.length?(k=e,r):k},r.labelAnchor=function(e){return arguments.length?(f=e,r):f},r.left=function(e){return arguments.length?(o=+e>1?1:+e<0?0:+e,r):o},r.orient=function(e){return arguments.length?(i=e(),r):i===1?"bottom":"top"},r.projection=function(e){return arguments.length?(n=e,r):n},r.radius=function(e){return arguments.length?(u=+e,r):u},r.size=function(e){return arguments.length?(t=[[0,0],e],r):t[1]},r.top=function(e){return arguments.length?(a=+e>1?1:+e<0?0:+e,r):a},r.tickFormat=function(e){return arguments.length?(C=e,r):C},r.tickPadding=function(e){return arguments.length?(F=+e,r):F},r.tickSize=function(e){return arguments.length?(c=+e,r):c},r.tickValues=function(e){return arguments.length?($=e,r):$},r.units=function(e){return arguments.length?({units:y,radius:u}=e,r):y},r.zoomClamp=function(e){return arguments.length?(D=!!e,r):D},r.zoomFactor=function(e){return arguments.length?(v=+e,r):v},r}export{St as g,Pt as s};
